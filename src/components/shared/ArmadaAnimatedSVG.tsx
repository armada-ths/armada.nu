"use client";
import { useEffect, useRef } from "react";

const ArmadaAnimatedSVG = () => {
  const svgRef = useRef<SVGSVGElement | null>(null);

  useEffect(() => {
    const svg = svgRef.current;
    if (!svg) return;

    const paths: NodeListOf<SVGPathElement> = svg.querySelectorAll("path");

    paths.forEach((path: SVGPathElement) => {
      const length = path.getTotalLength();

      // Set up the dash for animation
      path.style.strokeDasharray = `${length}`;
      path.style.strokeDashoffset = `${length}`;

      // Animate the stroke along the path
      path.animate(
        [
          { strokeDashoffset: length },
          { strokeDashoffset: 0 }
        ],
        {
          duration: 5000, // animation speed
          iterations: Infinity,
          easing: "linear" // constant speed along path
        }
      );
    });
  }, []);

  return (
    <svg
      ref={svgRef}
      width="400"
      height="400"
      viewBox="0 0 500 500"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <linearGradient
          id="armadaGradient"
          gradientUnits="userSpaceOnUse"
          x1="0"
          y1="0"
          x2="400"
          y2="0"
        >
          <stop offset="0%" stopColor="#00d79099" />
          <stop offset="75%" stopColor="#00d790" />
        </linearGradient>
      </defs>

      <path
        d="M 496,248 C 496,384.967 384.967,496 248,496 111.033,496 0,384.967 0,248 0,111.033 111.033,0 248,0 384.967,0 496,111.033 496,248 Z m -205.809,45.721 c 9.351,-1.456 18.436,-2.894 27.463,-4.322 1.794,-0.284 3.586,-0.567 5.378,-0.85 l 2.393,-0.379 c 2.18,-0.344 4.363,-0.674 6.719,-1.03 h 0.002 c 1.136,-0.172 2.313,-0.35 3.55,-0.538 -0.675,10.466 -3.254,20.011 -5.843,29.491 -6.232,22.822 -15.235,44.551 -26.526,65.346 -1.225,2.255 -2.726,2.965 -5.143,2.957 -19.827,-0.062 -39.654,-0.086 -59.481,0.007 -3.044,0.014 -5.096,-1.249 -6.659,-3.589 -7.601,-11.379 -11.604,-24.18 -14.264,-37.41 -2.166,-10.779 -2.427,-21.745 -2.173,-32.729 0.07,-2.993 0.416,-4.619 4.148,-5.189 17.445,-2.669 34.855,-5.573 52.264,-8.477 h 10e-4 l 0.002,-0.001 h 0.004 c 4.946,-0.825 9.891,-1.65 14.838,-2.47 0.516,-0.085 1.024,-0.225 1.595,-0.382 h 10e-4 v 0 c 0.51,-0.14 1.069,-0.294 1.731,-0.435 z m 28.297,-34.113 c -2.66,-10.564 -0.956,-20.714 3.183,-30.98 3.878,-8.795 9.078,-16.379 14.613,-23.746 -2,-1.487 -3.737,-1.333 -5.36,-1.188 h -0.002 c -0.159,0.014 -0.316,0.028 -0.473,0.041 -6.635,0.524 -13.269,1.066 -19.902,1.609 -13.651,1.115 -27.302,2.231 -40.964,3.193 -3.264,0.23 -4.95,1.211 -6.495,4.082 -10.002,18.585 -16.853,38.26 -20.142,59.063 -0.112,0.703 -0.229,1.409 -0.346,2.118 l -0.001,0.004 v 0 c -0.98,5.92 -1.997,12.061 -0.063,18.749 l 86.039,-15.115 c -0.466,-0.657 -0.926,-1.302 -1.379,-1.936 l -0.009,-0.013 c -3.892,-5.448 -7.258,-10.161 -8.699,-15.881 z m -82.636,-53.359 c -2.575,0.059 -4.723,0.059 -6.876,0.059 -0.777,-1.068 -0.39,-2.066 -0.02,-3.023 0.037,-0.094 0.073,-0.188 0.108,-0.282 6.239,-16.621 13.051,-32.986 21.222,-48.777 4.584,-8.859 9.828,-17.287 15.37,-25.554 0.957,-1.427 1.996,-2.877 3.803,-2.89 8.029,-0.057 16.059,-0.05 24.249,-0.043 2.776,0.003 5.569,0.005 8.388,0.005 -2.894,18.23 -4.716,35.812 -4.698,53.53 0.004,4.286 0.484,8.586 0.977,12.853 0.506,4.384 -1.73,5.759 -5.647,6.254 -14.992,1.896 -29.971,3.899 -44.949,5.902 h -0.002 c -3.203,0.428 -6.406,0.857 -9.609,1.284 -0.354,0.047 -0.699,0.166 -1.112,0.309 -0.341,0.117 -0.728,0.251 -1.204,0.373 z m -26.517,63.487 c -0.149,-11.568 -0.298,-23.186 1.004,-34.93 0.058,-8.027 0.001,-15.997 -0.056,-23.93 -0.107,-14.842 -0.213,-29.561 0.44,-44.31 -1.149,0.401 -1.706,0.815 -1.916,1.362 -5.336,13.944 -10.665,27.89 -15.994,41.837 -8.463,22.146 -16.926,44.292 -25.416,66.429 -1.024,2.67 0.188,3.47 2.373,4.338 5.212,2.071 10.406,4.186 15.6,6.301 5.395,2.196 10.79,4.393 16.204,6.54 0.561,0.222 1.113,0.505 1.671,0.789 1.755,0.897 3.562,1.82 5.843,0.994 0.466,-8.467 0.357,-16.93 0.247,-25.42 z"
        fill="none"
        stroke="url(#armadaGradient)"
        strokeWidth="9"
        strokeLinecap="round"
      />
    </svg>
  );
};

export default ArmadaAnimatedSVG;